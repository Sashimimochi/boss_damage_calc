# Boss Damage Calculator

## これは何？
リアルタイムに画面をキャプチャして、与ダメージを計算するためのツールです。

最初にマウスポインタで対象領域を指定して、その範囲の文字認識を行います。

## 準備
実行には以下のライブラリが必要になります。
事前にインストールをしてください。

### 外部ライブラリ
- Tesseract OCR
  - https://github.com/UB-Mannheim/tesseract/wiki

### Pythonライブラリ
以下のコマンドを実行すればインストールされます。
```Console
$ pip install -r requirements.txt
```

## 実行方法
以下のコマンドを実行して起動します。
```Console
$ python app.py
```

### Option
ツール起動前に事前に設定するオプションコマンドです。

- `export log_level=debug`: デバッグメッセージを表示する

## 使い方
基本的に、コンソールのメッセージに従います。

1. 読み取りたい画面を用意しておきます
1. 実行すると画面キャプチャを取得するメッセージが表示されるので、Enterを押して画面をキャプチャします
1. キャプチャ結果ウィンドウが表示されるので、ウィンドウ上の読み取りたい位置をドラッグして範囲を決めてください
1. 赤枠で表示されたキャプチャ範囲でよければ、ウィンドウを閉じてください
1. 敵の初期HPをコンソールから入力してください
1. 一定の間隔ごとに選択した範囲のスクリーンショットが撮られ、HP計算処理結果がコンソールに表示されます
1. 計算結果に間違いがあるときは、`output/hp.txt`に残りHPが出力されているので、手動で修正してください
1. コンソールで`Ctrl+C`を押すと終了します

実行をすると`output/hp.txt`に現在のHPが出力されます。
直接修正値を入力してもよいですし、差分を入力してもよいです。

example 1
```txt
9000
```
example 2
```txt
8500+500
```

## ベンチマーク
### 対象動画
https://www.youtube.com/watch?v=hJfyKHI1-dQ

### 実行結果
```Console
$ python app.py 
==================================================
[INFO] Will use tool Tesseract (sh)
==================================================
[INFO] Available languages: eng,jav,jpn,jpn_vert,osd,script/Japanese,script/Japanese_vert
==================================================
[INFO] Will use lang eng
==================================================
[INFO] Get position of left top in 3 sec.
==================================================
[INFO] Position: x1:955, y1:491
==================================================
[INFO] Get position of right bottom in 3 sec.
==================================================
[INFO] Position: x2:1424, y2:591
==================================================
[INFO] エスタークに543のダメージ
==================================================
[INFO] エスタークの残りHPは8457です
==================================================
[INFO] エスタークに226のダメージ
==================================================
[INFO] エスタークの残りHPは8231です
==================================================
[INFO] エスタークに527のダメージ
==================================================
[INFO] エスタークの残りHPは7704です
==================================================
[INFO] エスタークに523のダメージ
==================================================
[INFO] エスタークの残りHPは7181です
==================================================
[INFO] エスタークに523のダメージ
==================================================
[INFO] エスタークの残りHPは6658です
==================================================
[INFO] エスタークに254のダメージ
==================================================
[INFO] エスタークの残りHPは6404です
==================================================
[INFO] エスタークに447のダメージ
==================================================
[INFO] エスタークの残りHPは5957です
==================================================
[INFO] エスタークに48のダメージ
==================================================
[INFO] エスタークの残りHPは5909です
==================================================
[INFO] エスタークに118のダメージ
==================================================
[INFO] エスタークの残りHPは5791です
==================================================
[INFO] エスターク(にに222のダメージ
==================================================
[INFO] エスターク(にの残りHPは5569です
==================================================
[INFO] エスタークに115のダメージ
==================================================
[INFO] エスタークの残りHPは5454です
==================================================
[INFO] エスタークに128のダメージ
==================================================
[INFO] エスタークの残りHPは5326です
==================================================
[INFO] エスタークに128のダメージ
==================================================
[INFO] エスタークの残りHPは5198です
==================================================
[INFO] エスタークに228のダメージ
==================================================
[INFO] エスタークの残りHPは4970です
==================================================
[INFO] エスターク(に236のダメージ
==================================================
[INFO] エスターク(の残りHPは4734です
==================================================
[INFO] エスタークに218のダメージ
==================================================
[INFO] エスタークの残りHPは4516です
==================================================
[INFO] エスタークに218のダメージ
==================================================
[INFO] エスタークの残りHPは4298です
==================================================
[INFO] エスタークに208のダメージ
==================================================
[INFO] エスタークの残りHPは4090です
==================================================
[INFO] エスタークに224のダメージ
==================================================
[INFO] エスタークの残りHPは3866です
==================================================
[INFO] エスタークに224のダメージ
==================================================
[INFO] エスタークの残りHPは3642です
==================================================
[INFO] エスタークに214のダメージ
==================================================
[INFO] エスタークの残りHPは3428です
==================================================
[INFO] エスタークに130のダメージ
==================================================
[INFO] エスタークの残りHPは3298です
==================================================
[INFO] エスタークに219のダメージ
==================================================
[INFO] エスタークの残りHPは3079です
==================================================
[INFO] エスターのに224のダメージ
==================================================
[INFO] エスターのの残りHPは2855です
==================================================
[INFO] エスタークに221のダメージ
==================================================
[INFO] エスタークの残りHPは2634です
==================================================
[INFO] エスタークに221のダメージ
==================================================
[INFO] エスタークの残りHPは2413です
==================================================
[INFO] エスタークに222のダメージ
==================================================
[INFO] エスタークの残りHPは2191です
==================================================
[INFO] エスタークに222のダメージ
==================================================
[INFO] エスタークの残りHPは1969です
==================================================
[INFO] エスタークに238のダメージ
==================================================
[INFO] エスタークの残りHPは1731です
==================================================
[INFO] エスタークに214のダメージ
==================================================
[INFO] エスタークの残りHPは1517です
==================================================
[INFO] エスタークに214のダメージ
==================================================
[INFO] エスタークの残りHPは1303です
==================================================
[INFO] エスタークに212のダメージ
==================================================
[INFO] エスタークの残りHPは1091です
==================================================
[INFO] エスタークに128のダメージ
==================================================
[INFO] エスタークの残りHPは963です
==================================================
[INFO] エスタークに128のダメージ
==================================================
[INFO] エスタークの残りHPは835です
==================================================
[INFO] エスタークに124のダメージ
==================================================
[INFO] エスタークの残りHPは711です
==================================================
[INFO] エスタークに123のダメージ
==================================================
[INFO] エスタークの残りHPは588です
==================================================
[INFO] エスタークに217のダメージ
==================================================
[INFO] エスタークの残りHPは371です
==================================================
[INFO] エスタークに217のダメージ
==================================================
[INFO] エスタークの残りHPは154です
==================================================
[INFO] エスタークに217のダメージ
==================================================
[INFO] エスタークの残りHPは-63です
```